#!/bin/bash
BACKUP_DIR="$HOME/timewarrior-backups"
DATE=$(date +%Y%m%d-%H%M%S)

# Create backup directory
mkdir -p "$BACKUP_DIR"

# Export from server
ssh oracle 'timew export' > "$BACKUP_DIR/timewarrior-$DATE.json"

# Keep only last 30 backups
ls -t "$BACKUP_DIR"/timewarrior-*.json | tail -n +31 | xargs rm -f

echo "Backup completed: $DATE"
